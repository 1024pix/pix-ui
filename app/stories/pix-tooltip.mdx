import { Meta, Story, ArgTypes } from '@storybook/blocks';
import * as ComponentStories from './pix-tooltip.stories';

<Meta of={ComponentStories} />

# Pix Tooltip

Une infobulle qui s'affiche au survol d'un élément.

Ce composant est utilisé comme wrapper, c'est à dire qu'il encadre l'élément sur lequel on souhaite ajouter une infobulle. L'utilisation de `Named Block` permet d'utiliser des composants HTML facilement dans la tooltip.

> ⚠️ A noter que le wrapper PixTooltip est en `display: flex;`, il s'adaptera donc à la taille de ses enfants. Ainsi si votre élément ne s'affiche plus comme avant après l'ajout de la PixTooltip, veillez à rajouter les dimensions voulues à l'enfant.

> ⚠️ L'infobulle ne s'affichera pas si le texte est vide.

## Accessibilité

Les tooltips doivent être appliquées de préférences sur des éléments nativement focusable comme `<button>` ou `<input>`.

Si vous utilisez un élément `<div>` ou `<span>`, il faut ajouter `tabindex="0"` pour qu'il prenne le focus.

```html
<PixTooltip>
  <:triggerElement>
    <span tabindex="0">Mon span</span>
  </:triggerElement>

  <:tooltip>
    My tooltip
  </:tooltip>
</PixTooltip>
```

Les tooltips doivent prendre un `@id` et être référencées par leur élément déclencheur

- soit via `aria-describedby` si l'élément possèdent déjà un label, car le tooltip agit alors comme une description supplémentaire.

```html
<PixTooltip @id="tooltip-1">
  <:triggerElement>
    <PixButton aria-describedby="tooltip-1">Mon bouton</PixButton>
  </:triggerElement>

  <:tooltip>
    My tooltip
  </:tooltip>
</PixTooltip>
```

- soit via `aria-labelledby` si l'élément ne possède pas de label et que le tooltip fait office de libellé.

```html
<PixTooltip @id="tooltip-2" @text="Cette information apparaît uniquement au survol de l'icone">
  <span class="icon icon-info" aria-labelledby="tooltip-2"></span>
</PixTooltip>
```

## Default

Infobulle en position `top`, fond sombre (par défaut).

<Story of={ComponentStories.Default} height={200} />
<Story of={ComponentStories.WithIcon} height={200} />
<Story of={ComponentStories.WithInput} height={200} />

## Is Light

Infobulle en mode clair.

> ⚠️ le tooltip "light" est à utiliser de préférence sur fond coloré ! Mais ce n'est pas obligatoire.

<Story of={ComponentStories.isLight} height={200} />

## Position

Différentes positions de l'infobulle.
Existe aussi `top-left`, `top-right`, `bottom-left` et `bottom-right`.

<Story of={ComponentStories.left} height={100} />
<Story of={ComponentStories.right} height={100} />
<Story of={ComponentStories.bottom} height={150} />

## Is Wide

Infobulle en plus large.

<Story of={ComponentStories.isWide} height={200} />

## Is Inline

Infobulle dont le contenu reste sur une ligne.

<Story of={ComponentStories.isInline} height={200} />

## With HTML

Infobulle contenant des éléments HTML

<Story of={ComponentStories.WithHTML} height={200} />

## Hide

Cache la tooltip (par exemple si le contenu est vide).

<Story of={ComponentStories.hide} height={200} />

## Usage

```html
<PixTooltip>
  <:triggerElement>
    <button>Tooltip par défaut</button>
  </:triggerElement>
  <:tooltip>
    <PixIcon @name="openNew" /> Avec des <strong>éléments</strong> HTML/Ember
  </:tooltip>
</PixTooltip>

<PixTooltip
  @isLight={{true}}
>
  <:triggerElement>
    <button>Tooltip en mode clair</button>
  </:triggerElement>

  <:tooltip>
    Hey
  </:tooltip>
</PixTooltip>

<PixTooltip
  @isLight={{true}}
>
  <:triggerElement>
    <button>Tooltip sur une ligne</button>
  </:triggerElement>

  <:tooltip>
    Hey
  </:tooltip>
</PixTooltip>

<PixTooltip
  @position='bottom'
  @isLight={{true}}
  >
  <:triggerElement>
    <button>Tooltip apparaissant en bas</button>
  </:triggerElement>

  <:tooltip>
    Hey
  </:tooltip>
</PixTooltip>

<PixTooltip
  @hide={{true}}
  >
  <:triggerElement>
    <button>Tooltip n'apparaissant pas</button>
  </:triggerElement>

  <:tooltip>
    Hey
  </:tooltip>
</PixTooltip>

<PixTooltip
  @isWide={{true}}
  >
  <:triggerElement>
    <button>Tooltip en mode large</button>
  </:triggerElement>

  <:tooltip>
    Hey
  </:tooltip>
</PixTooltip>
```

## Arguments

<ArgTypes of={ComponentStories} />
