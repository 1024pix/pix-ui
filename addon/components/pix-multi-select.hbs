<div class="pix-multi-select" ...attributes {{on-click-outside this.hideDropDown capture=true}}>

  {{#if this.label}}
    <label for={{@id}} class="pix-multi-select__label">{{this.label}}</label>
  {{/if}}

  {{#if @isSearchable}}
    <label class="pix-multi-select-header {{if this.isBig 'pix-multi-select-header--big'}}">

      <span class="pix-multi-select-header__title">{{@title}}</span>
      <FaIcon @icon="magnifying-glass" class="pix-multi-select-header__search-icon" />

      <input
        id={{@id}}
        type="text"
        name={{@id}}
        placeholder={{this.placeholder}}
        autocomplete="off"
        {{on "input" this.updateSearch}}
        {{on "focus" this.focusDropdown}}
        class="pix-multi-select-header__search-input"
      />

    </label>
  {{else}}
    <button
      id={{@id}}
      type="button"
      class="pix-multi-select-header {{if this.isBig 'pix-multi-select-header--big'}}"
      {{on "click" this.toggleDropDown}}
    >
      {{@title}}
      <FaIcon
        class="pix-multi-select-header__dropdown-icon
          {{if this.isExpanded ' pix-multi-select-header__dropdown-icon--expand'}}"
        @icon={{if this.isExpanded "chevron-up" "chevron-down"}}
      />
    </button>
  {{/if}}

  <ul class="pix-multi-select-list {{unless this.isExpanded 'pix-multi-select-list--hidden'}}">
    {{#if (gt this.results.length 0)}}
      {{#each this.results as |option|}}
        <li class="pix-multi-select-list__item">
          <input
            class="pix-multi-select-list__checkbox
              {{if @isSearchable ' pix-multi-select-list__checkbox--searchable'}}"
            type="checkbox"
            checked={{option.checked}}
            id={{concat @id "-" option.value}}
            name={{option.label}}
            value={{option.value}}
            {{on "change" this.onSelect}}
          />
          <label for={{concat @id "-" option.value}}>
            {{yield option}}
          </label>
        </li>
      {{/each}}
    {{else if this.isLoadingOptions}}
      <li
        class="pix-multi-select-list__item pix-multi-select-list__item--no-result"
      >{{@loadingMessage}}</li>
    {{else}}
      <li
        class="pix-multi-select-list__item pix-multi-select-list__item--no-result"
      >{{@emptyMessage}}</li>
    {{/if}}
  </ul>
</div>