{{! template-lint-disable no-down-event-binding }}
<div class="pix-select">
  <div class="{{if @screenReaderOnly 'screen-reader-only'}}">
    <label for={{this.selectId}} class="pix-select__label">
      {{#if @requiredLabel}}
        <abbr class="mandatory-mark" title="{{@requiredLabel}}" aria-hidden="true">*</abbr>
      {{/if}}
      {{@label}}
    </label>

    {{#if @subLabel}}
      <span class="pix-select__sub-label">{{@subLabel}}</span>
    {{/if}}
  </div>

  {{#if @isSearchable}}

    <input
      id={{this.selectId}}
      list="{{this.datalistId}}"
      {{on "input" this.onChange}}
      class="{{if this.isValid 'pix-select--is-valid'}} {{if this.isBig 'pix-select--big'}}"
      ...attributes
      autocomplete="off"
    />

    <datalist id={{this.datalistId}}>
      {{#each @options as |opt|}}
        <option label={{opt.label}}>{{opt.label}}</option>
      {{/each}}
    </datalist>

  {{else}}

    <select
      id={{@id}}
      class="{{if this.isBig 'pix-select--big'}}"
      {{on "change" this.onChange}}
      ...attributes
    >
      {{#if (not-eq @emptyOptionLabel undefined)}}
        {{#if @emptyOptionNotSelectable}}
          <option value="" hidden>{{@emptyOptionLabel}}</option>
        {{else}}
          <option value="">{{@emptyOptionLabel}}</option>
        {{/if}}
      {{/if}}
      {{#each @options as |opt|}}
        {{#if (eq @selectedOption opt.value)}}
          {{! https://github.com/emberjs/ember.js/issues/15484
                ember-prop-modifier let us fix a bug about selected attribute in FireFox }}
          <option value={{opt.value}} {{prop selected="true"}}>
            {{opt.label}}
          </option>
        {{else}}
          <option value={{opt.value}}>
            {{opt.label}}
          </option>
        {{/if}}
      {{/each}}
    </select>
    <FaIcon class="pix-select__icon" @icon="chevron-down" />

  {{/if}}
</div>