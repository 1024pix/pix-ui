import { Meta } from '@storybook/addon-docs';

<Meta title="Développement/Storybook" />

# Déploiement de Storybook

Notre Storybook est déployé à l'adresse suivante : https://storybook.pix.fr

## C'est quoi Storybook ?

[Storybook](https://storybook.js.org/) est un outil pour faire des interfaces présentant les composants UI d'un projet.
Par abus de langage, lorsque nous parlons de Storybook, nous parlons du site web crée grâce à cet outil.

## Qui héberge notre Storybook ?

Notre Storybook est hébergé de manière statique sur les [Github Pages](https://pages.github.com/).

## Quand est mis à jour notre Storybook ?

La mise à jour de ce site Storybook est faite automatiquement lors d'une release de Pix UI.
A noter qu'il faudra attendre quelques minutes après la fin de la release pour voir le changement.

## Quelle version de Storybook est mise en ligne ?

La version des composants présentée sur notre Storybook correspond (en temps normal) à la version des composants présents sur la branche `master`.

## Concrètement comment ça marche ?

Lors de la release de Pix UI, Pix Bot effectue la commande suivante depuis la branche `master`:

```shell
npm run deploy-storybook
```

Cette commande fait appel à l'outil [storybook-deployer](https://github.com/storybookjs/storybook-deployer). Ce dernier effectue les actions suivantes :

- compiler Storybook comme une application statique
- commit et push le résultat précédent sur la branche `gh-pages`

_(Il est possible de customiser l'auteur ou le nom des commits, voir sur la [doc de storybook-deployer](https://github.com/storybookjs/storybook-deployer).)_

Le changement de la branche `gh-pages` est détecté par les Github Pages et la nouvelle version du site est re-déployée.

Pour changer la branche de déploiement ou l'url du site,
voir dans les [settings du repository de Pix UI](https://github.com/1024pix/pix-ui/settings), section Github Pages.
